import{ak as t,C as e,v as s,r as a,z as i,D as r,aR as n,x as o,o as h,d as l,e as d,b as c}from"./index-2b32231c.js";var p=(t,e)=>{const s=document.createElement(t);if(e&&"object"==typeof e)for(const a in e)"html"===a?s.innerHTML=e[a]:s.setAttribute(a,e[a]);return s},u=t=>{t instanceof NodeList?t.forEach((t=>u(t))):t.innerHTML=""},g=(t,e,s)=>p("li",{class:t,html:`<a href="#" data-page="${e}">${s}</a>`}),f=(t,e)=>{let s,a;1===e?(s=0,a=t.length):-1===e&&(s=t.length-1,a=-1);for(let i=!0;i;){i=!1;for(let r=s;r!=a;r+=e)if(t[r+e]&&t[r].value>t[r+e].value){const s=t[r],a=t[r+e],n=s;t[r]=a,t[r+e]=n,i=!0}}return t},m=function(t){let e=!1,s=!1;if((t=t||this.options.data).headings){e=p("thead");const s=p("tr");t.headings.forEach((t=>{const e=p("th",{html:t});s.appendChild(e)})),e.appendChild(s)}t.data&&t.data.length&&(s=p("tbody"),t.data.forEach((e=>{if(t.headings&&t.headings.length!==e.length)throw new Error("The number of rows do not match the number of headings.");const a=p("tr");e.forEach((t=>{const e=p("td",{html:t});a.appendChild(e)})),s.appendChild(a)}))),e&&(null!==this.dom.tHead&&this.dom.removeChild(this.dom.tHead),this.dom.appendChild(e)),s&&(this.dom.tBodies.length&&this.dom.removeChild(this.dom.tBodies[0]),this.dom.appendChild(s))},b={sortable:!0,searchable:!0,paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,header:!0,hiddenHeader:!1,footer:!1,tabIndex:!1,rowNavigation:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}},v=class{constructor(e,s={}){const a="string"==typeof e?document.querySelector(e):e;if(this.options={...b,...s,layout:{...b.layout,...s.layout},labels:{...b.labels,...s.labels}},this.rows=new class{constructor(t){this.dt=t,this.cursor=!1}build(t){const e=p("tr");let s=this.dt.headings;return s.length||(s=t.map((()=>""))),s.forEach(((s,a)=>{const i=p("td");t[a]&&t[a].length||(t[a]=""),i.innerHTML=t[a],i.data=t[a],e.appendChild(i)})),e}setCursor(t=!1){let e;Array.from(this.dt.dom.rows).forEach((t=>{e=t,t.classList.remove("dataTable-cursor")})),t&&(t.classList.add("dataTable-cursor"),this.cursor=t,this.dt.options.scrollY&&this.cursor.scrollIntoView({block:"nearest"}),this.dt.emit("datatable.cursormove",this.cursor,e))}render(t){return t}add(t){if(Array.isArray(t)){const e=this.dt;Array.isArray(t[0])?t.forEach((t=>{e.data.push(this.build(t))})):e.data.push(this.build(t)),e.data.length&&(e.hasRows=!0),this.update(),e.columns.rebuild()}}remove(t){const e=this.dt;Array.isArray(t)?(t.sort(((t,e)=>e-t)),t.forEach((t=>{e.data.splice(t,1)}))):"all"==t?e.data=[]:e.data.splice(t,1),e.data.length||(e.hasRows=!1),this.update(),e.columns.rebuild()}update(){this.dt.data.forEach(((t,e)=>{t.dataIndex=e}))}findRowIndex(t,e){return this.dt.data.findIndex((s=>s.children[t].innerText.toLowerCase().includes(String(e).toLowerCase())))}findRow(t,e){const s=this.findRowIndex(t,e);if(s<0)return{index:-1,row:null,cols:[]};const a=this.dt.data[s];return{index:s,row:a,cols:[...a.cells].map((t=>t.innerHTML))}}updateRow(t,e){const s=this.build(e);this.dt.data.splice(t,1,s),this.update(),this.dt.columns.rebuild()}}(this),this.columns=new class{constructor(t){this.dt=t}swap(t){if(t.length&&2===t.length){const e=[];this.dt.headings.forEach(((t,s)=>{e.push(s)}));const s=t[0],a=t[1],i=e[a];e[a]=e[s],e[s]=i,this.order(e)}}order(t){let e,s,a,i,r,n,o;const h=[[],[],[],[]],l=this.dt;t.forEach(((t,a)=>{r=l.headings[t],n="false"!==r.getAttribute("data-sortable"),e=r.cloneNode(!0),e.originalCellIndex=a,e.sortable=n,h[0].push(e),l.hiddenColumns.includes(t)||(s=r.cloneNode(!0),s.originalCellIndex=a,s.sortable=n,h[1].push(s))})),l.data.forEach(((e,s)=>{a=e.cloneNode(!1),i=e.cloneNode(!1),a.dataIndex=i.dataIndex=s,null!==e.searchIndex&&void 0!==e.searchIndex&&(a.searchIndex=i.searchIndex=e.searchIndex),t.forEach((t=>{o=e.cells[t].cloneNode(!0),o.data=e.cells[t].data,a.appendChild(o),l.hiddenColumns.includes(t)||(o=e.cells[t].cloneNode(!0),o.data=e.cells[t].data,i.appendChild(o))})),h[2].push(a),h[3].push(i)})),l.headings=h[0],l.activeHeadings=h[1],l.data=h[2],l.activeRows=h[3],l.update()}hide(t){if(t.length){const e=this.dt;t.forEach((t=>{e.hiddenColumns.includes(t)||e.hiddenColumns.push(t)})),this.rebuild()}}show(t){if(t.length){let e;const s=this.dt;t.forEach((t=>{e=s.hiddenColumns.indexOf(t),e>-1&&s.hiddenColumns.splice(e,1)})),this.rebuild()}}visible(t){let e;const s=this.dt;return t=t||s.headings.map((t=>t.originalCellIndex)),isNaN(t)?Array.isArray(t)&&(e=[],t.forEach((t=>{e.push(!s.hiddenColumns.includes(t))}))):e=!s.hiddenColumns.includes(t),e}add(t){let e;const s=document.createElement("th");if(!this.dt.headings.length)return this.dt.insert({headings:[t.heading],data:t.data.map((t=>[t]))}),void this.rebuild();this.dt.hiddenHeader?s.innerHTML="":t.heading.nodeName?s.appendChild(t.heading):s.innerHTML=t.heading,this.dt.headings.push(s),this.dt.data.forEach(((s,a)=>{t.data[a]&&(e=document.createElement("td"),t.data[a].nodeName?e.appendChild(t.data[a]):e.innerHTML=t.data[a],e.data=e.innerHTML,t.render&&(e.innerHTML=t.render.call(this,e.data,e,s)),s.appendChild(e))})),t.type&&s.setAttribute("data-type",t.type),t.format&&s.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&(s.sortable=t.sortable,s.setAttribute("data-sortable",!0===t.sortable?"true":"false")),this.rebuild(),this.dt.renderHeader()}remove(t){Array.isArray(t)?(t.sort(((t,e)=>e-t)),t.forEach((t=>this.remove(t)))):(this.dt.headings.splice(t,1),this.dt.data.forEach((e=>{e.removeChild(e.cells[t])}))),this.rebuild()}filter(t,e,s,a){const i=this.dt;if(i.filterState||(i.filterState={originalData:i.data}),!i.filterState[t]){const e=[...a,()=>!0];i.filterState[t]=function(){let t=0;return()=>e[t++%e.length]}()}const r=i.filterState[t](),n=Array.from(i.filterState.originalData).filter((e=>{const s=e.cells[t],a=s.hasAttribute("data-content")?s.getAttribute("data-content"):s.innerText;return"function"==typeof r?r(a):a===r}));i.data=n,i.data.length?(this.rebuild(),i.update()):(i.clear(),i.hasRows=!1,i.setMessage(i.options.labels.noRows)),s||i.emit("datatable.sort",t,e)}sort(e,s,a){const i=this.dt;if(i.hasHeadings&&(e<0||e>i.headings.length))return!1;const r=i.options.filters&&i.options.filters[i.headings[e].textContent];if(r&&0!==r.length)return void this.filter(e,s,a,r);i.sorting=!0,a||i.emit("datatable.sorting",e,s);let n=i.data;const o=[],h=[];let l=0,d=0;const c=i.headings[e],p=[];if("date"===c.getAttribute("data-type")){let e=!1;c.hasAttribute("data-format")&&(e=c.getAttribute("data-format")),p.push(t((()=>import("./date-KDB2IUTZ-15ee5adb.js")),["assets/date-KDB2IUTZ-15ee5adb.js","assets/chunk-PJ4ESXSS-0f5bc740.js","assets/index-2b32231c.js","assets/index-508eb21d.css"]).then((({parseDate:t})=>s=>t(s,e))))}Promise.all(p).then((t=>{const r=t[0];let p,u;Array.from(n).forEach((t=>{const s=t.cells[e],a=s.hasAttribute("data-content")?s.getAttribute("data-content"):s.innerText;let i;i=r?r(a):"string"==typeof a?a.replace(/(\$|,|\s|%)/g,""):a,parseFloat(i)==i?h[d++]={value:Number(i),row:t}:o[l++]={value:"string"==typeof a?a.toLowerCase():a,row:t}})),s||(s=c.classList.contains("asc")?"desc":"asc"),"desc"==s?(p=f(o,-1),u=f(h,-1),c.classList.remove("asc"),c.classList.add("desc"),c.setAttribute("aria-sort","descending")):(p=f(h,1),u=f(o,1),c.classList.remove("desc"),c.classList.add("asc"),c.setAttribute("aria-sort","ascending")),i.lastTh&&c!=i.lastTh&&(i.lastTh.classList.remove("desc"),i.lastTh.classList.remove("asc"),i.lastTh.removeAttribute("aria-sort")),i.lastTh=c,n=p.concat(u),i.data=[];const g=[];n.forEach(((t,e)=>{i.data.push(t.row),null!==t.row.searchIndex&&void 0!==t.row.searchIndex&&g.push(e)})),i.searchData=g,this.rebuild(),i.update(),a||i.emit("datatable.sort",e,s)}))}rebuild(){let t,e,s,a;const i=this.dt,r=[];i.activeRows=[],i.activeHeadings=[],i.headings.forEach(((t,e)=>{t.originalCellIndex=e,t.sortable="false"!==t.getAttribute("data-sortable"),i.hiddenColumns.includes(e)||i.activeHeadings.push(t)})),i.selectedColumns.length&&i.data.forEach((t=>{Array.from(t.cells).forEach(((e,s)=>{i.selectedColumns.includes(s)&&i.columnRenderers.forEach((a=>{a.columns.includes(s)&&(i.data[e.parentNode.dataIndex].cells[e.cellIndex].innerHTML=e.innerHTML=a.renderer.call(this,e.data,e,t))}))}))})),i.data.forEach(((n,o)=>{t=n.cloneNode(!1),e=n.cloneNode(!1),t.dataIndex=e.dataIndex=o,null!==n.searchIndex&&void 0!==n.searchIndex&&(t.searchIndex=e.searchIndex=n.searchIndex),Array.from(n.cells).forEach((r=>{s=r.cloneNode(!0),s.data=r.data,t.appendChild(s),i.hiddenColumns.includes(s.cellIndex)||(a=s.cloneNode(!0),a.data=s.data,e.appendChild(a))})),r.push(t),i.activeRows.push(e)})),i.data=r,i.update()}}(this),this.initialized=!1,this.initialLayout=a.innerHTML,this.initialSortable=this.options.sortable,this.options.tabIndex?a.tabIndex=this.options.tabIndex:this.options.rowNavigation&&-1===a.tabIndex&&(a.tabIndex=0),this.options.header||(this.options.sortable=!1),null===a.tHead&&(!this.options.data||this.options.data&&!this.options.data.headings)&&(this.options.sortable=!1),a.tBodies.length&&!a.tBodies[0].rows.length&&this.options.data&&!this.options.data.data)throw new Error("You seem to be using the data option, but you've not defined any rows.");this.dom=a,this.listeners={onResize:t=>this.onResize(t)},this.init()}init(t){if(this.initialized||this.dom.classList.contains("dataTable-table"))return!1;Object.assign(this.options,t||{}),this.currentPage=1,this.onFirstPage=!0,this.hiddenColumns=[],this.columnRenderers=[],this.selectedColumns=[],this.render(),setTimeout((()=>{this.emit("datatable.init"),this.initialized=!0}),10)}render(){let t="";if(this.options.data&&m.call(this),this.body=this.dom.tBodies[0],this.head=this.dom.tHead,this.foot=this.dom.tFoot,this.body||(this.body=p("tbody"),this.dom.appendChild(this.body)),this.hasRows=this.body.rows.length>0,!this.head){const t=p("thead"),e=p("tr");this.hasRows&&(Array.from(this.body.rows[0].cells).forEach((()=>{e.appendChild(p("th"))})),t.appendChild(e)),this.head=t,this.dom.insertBefore(this.head,this.body),this.hiddenHeader=this.options.hiddenHeader}if(this.headings=[],this.hasHeadings=this.head.rows.length>0,this.hasHeadings&&(this.header=this.head.rows[0],this.headings=[].slice.call(this.header.cells)),this.options.header||this.head&&this.dom.removeChild(this.dom.tHead),this.options.footer?this.head&&!this.foot&&(this.foot=p("tfoot",{html:this.head.innerHTML}),this.dom.appendChild(this.foot)):this.foot&&this.dom.removeChild(this.dom.tFoot),this.wrapper=p("div",{class:"dataTable-wrapper dataTable-loading"}),t+="<div class='dataTable-top'>",t+=this.options.layout.top,t+="</div>",this.options.scrollY.length?t+=`<div class='dataTable-container' style='height: ${this.options.scrollY}; overflow-Y: auto;'></div>`:t+="<div class='dataTable-container'></div>",t+="<div class='dataTable-bottom'>",t+=this.options.layout.bottom,t+="</div>",t=t.replace("{info}",this.options.paging?"<div class='dataTable-info'></div>":""),this.options.paging&&this.options.perPageSelect){let e="<div class='dataTable-dropdown'><label>";e+=this.options.labels.perPage,e+="</label></div>";const s=p("select",{class:"dataTable-selector"});this.options.perPageSelect.forEach((t=>{const e=t===this.options.perPage,a=new Option(t,t,e,e);s.add(a)})),e=e.replace("{select}",s.outerHTML),t=t.replace("{select}",e)}else t=t.replace("{select}","");if(this.options.searchable){const e=`<div class='dataTable-search'><input class='dataTable-input' placeholder='${this.options.labels.placeholder}' type='text'></div>`;t=t.replace("{search}",e)}else t=t.replace("{search}","");this.hasHeadings&&this.renderHeader(),this.dom.classList.add("dataTable-table");const e=p("nav",{class:"dataTable-pagination"}),s=p("ul",{class:"dataTable-pagination-list"});e.appendChild(s),t=t.replace(/\{pager\}/g,e.outerHTML),this.wrapper.innerHTML=t,this.container=this.wrapper.querySelector(".dataTable-container"),this.pagers=this.wrapper.querySelectorAll(".dataTable-pagination-list"),this.label=this.wrapper.querySelector(".dataTable-info"),this.dom.parentNode.replaceChild(this.wrapper,this.dom),this.container.appendChild(this.dom),this.rect=this.dom.getBoundingClientRect(),this.data=Array.from(this.body.rows),this.activeRows=this.data.slice(),this.activeHeadings=this.headings.slice(),this.update(),this.setColumns(),this.fixHeight(),this.fixColumns(),this.options.header||this.wrapper.classList.add("no-header"),this.options.footer||this.wrapper.classList.add("no-footer"),this.options.sortable&&this.wrapper.classList.add("sortable"),this.options.searchable&&this.wrapper.classList.add("searchable"),this.options.fixedHeight&&this.wrapper.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapper.classList.add("fixed-columns"),this.bindEvents()}renderPage(t=!1){if(this.hasHeadings&&(u(this.header),this.activeHeadings.forEach((t=>this.header.appendChild(t)))),this.hasRows&&this.totalPages){this.currentPage>this.totalPages&&(this.currentPage=1);const t=this.currentPage-1,e=document.createDocumentFragment();this.pages[t].forEach((t=>e.appendChild(this.rows.render(t)))),this.clear(e),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage}else this.setMessage(this.options.labels.noRows);let e,s=0,a=0,i=0;if(this.totalPages&&(s=this.currentPage-1,a=s*this.options.perPage,i=a+this.pages[s].length,a+=1,e=this.searching?this.searchData.length:this.data.length),this.label&&this.options.labels.info.length){const t=this.options.labels.info.replace("{start}",a).replace("{end}",i).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",e);this.label.innerHTML=e?t:""}if(1==this.currentPage&&this.fixHeight(),this.options.rowNavigation&&(!this.rows.cursor||!this.pages[this.currentPage-1].includes(this.rows.cursor))){const e=this.pages[this.currentPage-1];t?this.rows.setCursor(e[e.length-1]):this.rows.setCursor(e[0])}}renderPager(){if(u(this.pagers),this.totalPages>1){const t="pager",e=document.createDocumentFragment(),s=this.onFirstPage?1:this.currentPage-1,a=this.onLastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&e.appendChild(g(t,1,this.options.firstText)),this.options.nextPrev&&!this.onFirstPage&&e.appendChild(g(t,s,this.options.prevText));let i=this.links;this.options.truncatePager&&(i=((t,e,s,a,i)=>{let r;const n=2*(a=a||2);let o=e-a,h=e+a;const l=[],d=[];e<4-a+n?h=3+n:e>s-(3-a+n)&&(o=s-(2+n));for(let c=1;c<=s;c++)if(1==c||c==s||c>=o&&c<=h){const e=t[c-1];e.classList.remove("active"),l.push(e)}return l.forEach((e=>{const s=e.children[0].getAttribute("data-page");if(r){const e=r.children[0].getAttribute("data-page");if(s-e==2)d.push(t[e]);else if(s-e!=1){const t=p("li",{class:"ellipsis",html:`<a href="#">${i}</a>`});d.push(t)}}d.push(e),r=e})),d})(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),this.links[this.currentPage-1].classList.add("active"),i.forEach((t=>{t.classList.remove("active"),e.appendChild(t)})),this.links[this.currentPage-1].classList.add("active"),this.options.nextPrev&&!this.onLastPage&&e.appendChild(g(t,a,this.options.nextText)),this.options.firstLast&&e.appendChild(g(t,this.totalPages,this.options.lastText)),this.pagers.forEach((t=>{t.appendChild(e.cloneNode(!0))}))}}renderHeader(){this.labels=[],this.headings&&this.headings.length&&this.headings.forEach(((t,e)=>{if(this.labels[e]=t.textContent,t.firstElementChild&&t.firstElementChild.classList.contains("dataTable-sorter")&&(t.innerHTML=t.firstElementChild.innerHTML),t.sortable="false"!==t.getAttribute("data-sortable"),t.originalCellIndex=e,this.options.sortable&&t.sortable){const e=p("a",{href:"#",class:"dataTable-sorter",html:t.innerHTML});t.innerHTML="",t.setAttribute("data-sortable",""),t.appendChild(e)}})),this.fixColumns()}bindEvents(){if(this.options.perPageSelect){const t=this.wrapper.querySelector(".dataTable-selector");t&&t.addEventListener("change",(()=>{this.options.perPage=parseInt(t.value,10),this.update(),this.fixHeight(),this.emit("datatable.perpage",this.options.perPage)}),!1)}this.options.searchable&&(this.input=this.wrapper.querySelector(".dataTable-input"),this.input&&this.input.addEventListener("keyup",(()=>this.search(this.input.value)),!1)),this.wrapper.addEventListener("click",(t=>{const e=t.target.closest("a");e&&"a"===e.nodeName.toLowerCase()&&(e.hasAttribute("data-page")?(this.page(e.getAttribute("data-page")),t.preventDefault()):this.options.sortable&&e.classList.contains("dataTable-sorter")&&"false"!=e.parentNode.getAttribute("data-sortable")&&(this.columns.sort(this.headings.indexOf(e.parentNode)),t.preventDefault()))}),!1),this.options.rowNavigation?(this.dom.addEventListener("keydown",(t=>{"ArrowUp"===t.key?this.rows.cursor.previousElementSibling?(this.rows.setCursor(this.rows.cursor.previousElementSibling),t.preventDefault(),t.stopPropagation()):this.onFirstPage||this.page(this.currentPage-1,!0):"ArrowDown"===t.key?this.rows.cursor.nextElementSibling?(this.rows.setCursor(this.rows.cursor.nextElementSibling),t.preventDefault(),t.stopPropagation()):this.onLastPage||this.page(this.currentPage+1):["Enter"," "].includes(t.key)&&this.emit("datatable.selectrow",this.rows.cursor,t)})),this.body.addEventListener("mousedown",(t=>{if(this.body.matches(":focus")){const e=Array.from(this.body.rows).find((e=>e.contains(t.target)));this.emit("datatable.selectrow",e,t)}}))):this.body.addEventListener("mousedown",(t=>{const e=Array.from(this.body.rows).find((e=>e.contains(t.target)));this.emit("datatable.selectrow",e,t)})),window.addEventListener("resize",this.listeners.onResize)}onResize(){this.rect=this.container.getBoundingClientRect(),this.rect.width&&this.fixColumns()}setColumns(t){t||this.data.forEach((t=>{Array.from(t.cells).forEach((t=>{t.data=t.innerHTML}))})),this.options.columns&&this.headings.length&&this.options.columns.forEach((t=>{Array.isArray(t.select)||(t.select=[t.select]),t.hasOwnProperty("render")&&"function"==typeof t.render&&(this.selectedColumns=this.selectedColumns.concat(t.select),this.columnRenderers.push({columns:t.select,renderer:t.render})),t.select.forEach((e=>{const s=this.headings[e];s&&(t.type&&s.setAttribute("data-type",t.type),t.format&&s.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&s.setAttribute("data-sortable",t.sortable),t.hasOwnProperty("hidden")&&!1!==t.hidden&&this.columns.hide([e]),t.hasOwnProperty("sort")&&1===t.select.length&&this.columns.sort(t.select[0],t.sort,!0))}))})),this.hasRows&&(this.data.forEach(((t,e)=>{t.dataIndex=e,Array.from(t.cells).forEach((t=>{t.data=t.innerHTML}))})),this.columns.rebuild()),this.renderHeader()}destroy(){this.dom.innerHTML=this.initialLayout,this.dom.classList.remove("dataTable-table"),this.wrapper.parentNode.replaceChild(this.dom,this.wrapper),this.initialized=!1,window.removeEventListener("resize",this.listeners.onResize)}update(){this.wrapper.classList.remove("dataTable-empty"),this.paginate(),this.renderPage(),this.links=[];let t=this.pages.length;for(;t--;){const e=t+1;this.links[t]=g(0===t?"active":"",e,e)}this.sorting=!1,this.renderPager(),this.rows.update(),this.emit("datatable.update")}paginate(){let t=this.activeRows;return this.searching&&(t=[],this.searchData.forEach((e=>t.push(this.activeRows[e])))),this.options.paging?this.pages=t.map(((e,s)=>s%this.options.perPage==0?t.slice(s,s+this.options.perPage):null)).filter((t=>t)):this.pages=[t],this.totalPages=this.lastPage=this.pages.length,this.totalPages}fixColumns(){if((this.options.scrollY.length||this.options.fixedColumns)&&this.activeHeadings&&this.activeHeadings.length){let t,e=!1;if(this.columnWidths=[],this.dom.tHead){this.options.scrollY.length&&(e=p("thead"),e.appendChild(p("tr")),e.style.height="0px",this.headerTable&&(this.dom.tHead=this.headerTable.tHead)),this.activeHeadings.forEach((t=>{t.style.width=""}));const t=this.activeHeadings.reduce(((t,e)=>t+e.offsetWidth),0);if(this.activeHeadings.forEach(((s,a)=>{const i=s.offsetWidth,r=i/t*100;if(s.style.width=`${r}%`,this.columnWidths[a]=i,this.options.scrollY.length){const t=p("th");e.firstElementChild.appendChild(t),t.style.width=`${r}%`,t.style.paddingTop="0",t.style.paddingBottom="0",t.style.border="0"}})),this.options.scrollY.length){const t=this.dom.parentElement;if(!this.headerTable){this.headerTable=p("table",{class:"dataTable-table"});const e=p("div",{class:"dataTable-headercontainer"});e.appendChild(this.headerTable),t.parentElement.insertBefore(e,t)}const s=this.dom.tHead;this.dom.replaceChild(e,s),this.headerTable.tHead=s,this.headerTable.parentElement.style.paddingRight=`${this.headerTable.clientWidth-this.dom.clientWidth+parseInt(this.headerTable.parentElement.style.paddingRight||"0",10)}px`,t.scrollHeight>t.clientHeight&&(t.style.overflowY="scroll")}}else{t=[],e=p("thead");const s=p("tr");Array.from(this.dom.tBodies[0].rows[0].cells).forEach((()=>{const e=p("th");s.appendChild(e),t.push(e)})),e.appendChild(s),this.dom.insertBefore(e,this.body);const a=[];t.forEach(((t,e)=>{const s=t.offsetWidth,i=s/this.rect.width*100;a.push(i),this.columnWidths[e]=s})),this.data.forEach((t=>{Array.from(t.cells).forEach(((t,e)=>{this.columns.visible(t.cellIndex)&&(t.style.width=`${a[e]}%`)}))})),this.dom.removeChild(e)}}}fixHeight(){this.options.fixedHeight&&(this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=`${this.rect.height}px`)}search(t){return!!this.hasRows&&(t=t.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],t.length?(this.clear(),this.data.forEach(((e,s)=>{const a=this.searchData.includes(e);t.split(" ").reduce(((t,s)=>{let a=!1,i=null,r=null;for(let n=0;n<e.cells.length;n++)if(i=e.cells[n],r=i.hasAttribute("data-content")?i.getAttribute("data-content"):i.textContent,r.toLowerCase().includes(s)&&this.columns.visible(i.cellIndex)){a=!0;break}return t&&a}),!0)&&!a?(e.searchIndex=s,this.searchData.push(s)):e.searchIndex=null})),this.wrapper.classList.add("search-results"),this.searchData.length?this.update():(this.wrapper.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),void this.emit("datatable.search",t,this.searchData)):(this.searching=!1,this.update(),this.emit("datatable.search",t,this.searchData),this.wrapper.classList.remove("search-results"),!1))}page(t,e=!1){return t!=this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(this.renderPage(e),this.renderPager(),void this.emit("datatable.page",t)))}sortColumn(t,e){this.columns.sort(t,e)}insert(t){let e=[];if(s=t,"[object Object]"===Object.prototype.toString.call(s)){if(t.headings&&!this.hasHeadings&&!this.hasRows){const e=p("tr");t.headings.forEach((t=>{const s=p("th",{html:t});e.appendChild(s)})),this.head.appendChild(e),this.header=e,this.headings=[].slice.call(e.cells),this.hasHeadings=!0,this.options.sortable=this.initialSortable,this.renderHeader(),this.activeHeadings=this.headings.slice()}t.data&&Array.isArray(t.data)&&(e=t.data)}else Array.isArray(t)&&t.forEach((t=>{const s=[];Object.entries(t).forEach((([t,e])=>{const a=this.labels.indexOf(t);a>-1&&(s[a]=e)})),e.push(s)}));var s;e.length&&(this.rows.add(e),this.hasRows=!0),this.update(),this.setColumns(),this.fixColumns()}refresh(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")}clear(t){this.body&&u(this.body);let e=this.body;if(this.body||(e=this.dom),t){if("string"==typeof t){document.createDocumentFragment().innerHTML=t}e.appendChild(t)}}print(){const t=this.activeHeadings,e=this.activeRows,s=p("table"),a=p("thead"),i=p("tbody"),r=p("tr");t.forEach((t=>{r.appendChild(p("th",{html:t.textContent}))})),a.appendChild(r),e.forEach((t=>{const e=p("tr");Array.from(t.cells).forEach((t=>{e.appendChild(p("td",{html:t.textContent}))})),i.appendChild(e)})),s.appendChild(a),s.appendChild(i);const n=window.open();n.document.body.appendChild(s),n.print()}setMessage(t){let e=1;this.hasRows?e=this.data[0].cells.length:this.activeHeadings.length&&(e=this.activeHeadings.length),this.wrapper.classList.add("dataTable-empty"),this.label&&(this.label.innerHTML=""),this.totalPages=0,this.renderPager(),this.clear(p("tr",{html:`<td class="dataTables-empty" colspan="${e}">${t}</td>`}))}on(t,e){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e)}off(t,e){this.events=this.events||{},t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)}emit(t){if(this.events=this.events||{},t in this.events!=!1)for(let e=0;e<this.events[t].length;e++)this.events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}};
/*! Bundled license information:

simple-datatables/src/index.js:
  (*!
   *
   * Simple-DataTables
   * Copyright (c) 2015-2017 Karl Saunders (https://mobius.ovh)
   * Copyright (c) 2018- Johannes Wilm (https://www.johanneswilm.org)
   * Licensed under MIT (https://www.opensource.org/licenses/mit-license.php)
   *
   *
   *)
*/
const w=e({__name:"VSimpleDatatables",props:{options:{default:()=>({})},autoupdate:{type:Boolean}},emits:["init","refresh","update","page","sort","perpage","search"],setup(t,{emit:e}){const p=t,u=s(),g=s(),f=s(null),m=s(!1),b=a({column:0,direction:""}),w=()=>{m.value||(m.value=!0)},y=()=>{m.value&&(m.value=!1)},C=()=>{if(g.value){const t=g.value.querySelector(".dataTable-input"),e=g.value.querySelector(".dataTable-selector"),s=g.value.querySelector(".dataTable-pagination"),a=g.value.querySelectorAll(".dataTable-sorter");t&&(t.addEventListener("focus",w,!1),t.addEventListener("blur",y,!1)),e&&(e.addEventListener("focus",w,!1),e.addEventListener("blur",y,!1),e.addEventListener("change",y,!1)),s&&(s.addEventListener("mousedown",w,!1),s.addEventListener("mouseup",y,!1)),a.forEach((t=>{let e=t;e&&(e.addEventListener("mousedown",w,!1),e.addEventListener("mouseup",y,!1))}))}f.value&&(f.value.on("datatable.init",(()=>{e("init")})),f.value.on("datatable.refresh",(()=>{e("refresh")})),f.value.on("datatable.update",(()=>{e("update")})),f.value.on("datatable.page",(t=>{e("page",t)})),f.value.on("datatable.sort",((t,s)=>{b.column=t,b.direction=s||"",e("sort",t,s)})),f.value.on("datatable.perpage",(t=>{e("perpage",t)})),f.value.on("datatable.search",((t,s)=>{e("search",t,s)})))},E=()=>{if(f.value&&(f.value.destroy(),f.value=null),g.value){const t=g.value.querySelector(".dataTable-input"),e=g.value.querySelector(".dataTable-selector"),s=g.value.querySelector(".dataTable-pagination"),a=g.value.querySelectorAll(".dataTable-sorter");t&&(t.removeEventListener("focus",w),t.removeEventListener("blur",y)),e&&(e.removeEventListener("focus",w),e.removeEventListener("blur",y),e.removeEventListener("change",y)),s&&(s.removeEventListener("mousedown",w),s.removeEventListener("mouseup",y)),a.forEach((t=>{let e=t;e&&(e.removeEventListener("mousedown",w),e.removeEventListener("mouseup",y))}))}};return i((()=>{u.value&&(f.value=new v(u.value,p.options)),C()})),r((()=>{E()})),n(p.options)&&o([p.options,()=>p.autoupdate],(()=>{var t,e;if(u.value&&p.autoupdate&&!m.value){let s=1,a=10,i="";f.value&&(s=f.value.currentPage,i=null==(t=f.value.input)?void 0:t.value,a=null==(e=f.value.options)?void 0:e.perPage,E()),f.value=new v(u.value,{...p.options,perPage:a}),!1!==p.options.searchable&&(f.value.input.value=i,f.value.input.dispatchEvent(new Event("keyup"))),""!==b.direction&&f.value.columns().sort(b.column,b.direction),f.value.page(s),C()}})),(t,e)=>(h(),l("div",{ref_key:"wrapperElement",ref:g},[d("table",{ref_key:"tableElement",ref:u},[c(t.$slots,"default")],512)],512))}});export{w as _};
